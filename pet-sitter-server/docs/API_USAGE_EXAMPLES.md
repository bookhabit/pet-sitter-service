# API ì„¤ê³„ ê°€ì´ë“œ: GraphQL vs REST í˜¼ìš© ì „ëµ

> NestJS í”„ë¡œì íŠ¸ì—ì„œ GraphQLê³¼ REST APIë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í˜¼ìš©í•˜ê¸° ìœ„í•œ ê°€ì´ë“œ

---

## ğŸ“‹ ëª©ì°¨

1. [ë¬¸ì„œ ëª©ì ](#ë¬¸ì„œ-ëª©ì )
2. [ê¸°ë³¸ ì›ì¹™](#ê¸°ë³¸-ì›ì¹™)
3. [API ì„ íƒ ê¸°ì¤€](#api-ì„ íƒ-ê¸°ì¤€)
4. [ê¸ˆì§€ íŒ¨í„´](#ê¸ˆì§€-íŒ¨í„´)
5. [êµ¬ì¸ê³µê³  ëª©ë¡ì„ RESTë¡œ êµ¬í˜„í•œ ì´ìœ ](#êµ¬ì¸ê³µê³ -ëª©ë¡ì„-restë¡œ-êµ¬í˜„í•œ-ì´ìœ )
6. [Jobs API ì‚¬ìš© ì˜ˆì‹œ](#jobs-api-ì‚¬ìš©-ì˜ˆì‹œ)

---

## ğŸ¯ ë¬¸ì„œ ëª©ì 

ì´ ë¬¸ì„œëŠ” **RESTì™€ GraphQL ì¤‘ ì–´ë–¤ ë°©ì‹ì„ ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ì§€**ë¥¼ ëª…í™•íˆ ì •ì˜í•˜ì—¬ ë‹¤ìŒì„ ë°©ì§€í•©ë‹ˆë‹¤:

- âŒ API ì¤‘ë³µ êµ¬í˜„
- âŒ í´ë¼ì´ì–¸íŠ¸ í˜¼ë€
- âŒ ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì¦ê°€

**ğŸ‘‰ ì´ ë¬¸ì„œì˜ ì›ì¹™ì´ ëª¨ë“  API ì˜ì‚¬ê²°ì •ì˜ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤.**

---

## ğŸ“ í•™ìŠµ ëª©ì  ì˜ˆì™¸

**âš ï¸ ì´ í”„ë¡œì íŠ¸ëŠ” í•™ìŠµ ëª©ì ìœ¼ë¡œ ì˜ˆì™¸ ê·œì¹™ì„ ì ìš©í•©ë‹ˆë‹¤.**

### í”„ë¡œì íŠ¸ ëª©í‘œ

ë‹¤ì–‘í•œ í´ë¼ì´ì–¸íŠ¸ í”Œë«í¼ì—ì„œ **RESTì™€ GraphQL í†µí•© ê²½í—˜ì„ ë¹„êµ í•™ìŠµ**í•˜ê¸° ìœ„í•´, ë™ì¼í•œ ê¸°ëŠ¥ì„ ë‘ í”„ë¡œí† ì½œë¡œ ëª¨ë‘ ì œê³µí•©ë‹ˆë‹¤.

### í•™ìŠµ ëŒ€ìƒ í”Œë«í¼

```
Web:
  - Next.js (REST + GraphQL)
  - React (REST + GraphQL)
  - Vanilla JS (REST + GraphQL)

Mobile:
  - EXPO (REST + GraphQL)
  - Android Jetpack Compose (REST + GraphQL)
  - iOS SwiftUI (REST + GraphQL)
```

### ì ìš©ë˜ëŠ” ì˜ˆì™¸

| í”„ë¡œë•ì…˜ ì›ì¹™ | í•™ìŠµ í”„ë¡œì íŠ¸ ì˜ˆì™¸ |
|--------------|------------------|
| âŒ ë™ì¼ ê¸°ëŠ¥ ì¤‘ë³µ ê¸ˆì§€ | âœ… ëª¨ë“  ê¸°ëŠ¥ì„ REST + GraphQLë¡œ ì œê³µ |
| âŒ ë³µì¡í•œ ê²€ìƒ‰ì€ RESTë§Œ | âœ… GraphQLë¡œë„ êµ¬í˜„í•˜ì—¬ ë¹„êµ í•™ìŠµ |
| âŒ í•˜ë‚˜ì˜ í”„ë¡œí† ì½œ ì„ íƒ | âœ… í´ë¼ì´ì–¸íŠ¸ê°€ ì„ íƒí•˜ì—¬ ì—°ë™ |

### í•™ìŠµ íš¨ê³¼

1. **í”„ë¡œí† ì½œë³„ íŠ¹ì„± ì²´ë“**
   - REST: URL ì„¤ê³„, HTTP ìºì‹±, ìƒíƒœ ê´€ë¦¬
   - GraphQL: Query ìµœì í™”, Fragment, Normalization

2. **í”Œë«í¼ë³„ Best Practice**
   - Next.js SSRì—ì„œ REST vs GraphQL
   - Nativeì—ì„œ Apollo Client vs React Query
   - Offline-first ì „ëµ ë¹„êµ

3. **ì‹¤ì „ ì˜ì‚¬ê²°ì • ëŠ¥ë ¥**
   - ê°™ì€ ê¸°ëŠ¥ì„ ë‘ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê³ 
   - ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ì–´ë–¤ ê²ƒì„ ì„ íƒí• ì§€ íŒë‹¨ ê°€ëŠ¥

**ğŸ“Œ í”„ë¡œë•ì…˜ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì•„ë˜ì˜ "ê¸°ë³¸ ì›ì¹™"ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤.**

---

## ğŸ“ ê¸°ë³¸ ì›ì¹™

### ì›ì¹™ 1. Command / Query ë¶„ë¦¬ (CQRS íŒ¨í„´)

```
Command (ìƒíƒœ ë³€ê²½)  â†’ GraphQL
Query (ì¡°íšŒ/ê²€ìƒ‰)    â†’ REST
```

**âš ï¸ ì˜ˆì™¸ ì‚¬í•­:**
- ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ ìƒì„¸ ì¡°íšŒ (IDë¡œ ì§ì ‘ ì¡°íšŒ) â†’ GraphQL í—ˆìš©
- ê´€ê³„í˜• ë°ì´í„°ê°€ í•„ìš”í•œ ì¡°íšŒ â†’ GraphQL í—ˆìš©

**â— ì´ ì›ì¹™ì„ ì–´ê¸¸ ê²½ìš° ë°˜ë“œì‹œ ê·¼ê±°ë¥¼ ë¬¸ì„œí™”í•©ë‹ˆë‹¤.**

---

### ì›ì¹™ 2. Service ê³„ì¸µì€ ê³µìš©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Controller â”‚     â”‚  Resolver   â”‚
â”‚   (REST)    â”‚     â”‚  (GraphQL)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Service   â”‚  â† ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê·œì¹™:**
- âœ… Controllerì™€ ResolverëŠ” **ì–‡ê²Œ ìœ ì§€** (ì „ë‹¬ì ì—­í• ë§Œ)
- âœ… ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ **Serviceì— ì¡´ì¬**
- âœ… ServiceëŠ” DTOì™€ InputType ëª¨ë‘ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì„¤ê³„

---

### ì›ì¹™ 3. í´ë¼ì´ì–¸íŠ¸ ìºì‹œëŠ” ë¶„ë¦¬

```
REST      â†’ React Query (ë˜ëŠ” SWR)
GraphQL   â†’ Apollo Client
```

**âŒ ìºì‹œ í†µí•© ì‹œë„ ê¸ˆì§€** - ê° í”„ë¡œí† ì½œì˜ ìºì‹± ë©”ì»¤ë‹ˆì¦˜ì„ ìµœëŒ€í•œ í™œìš©

---

## ğŸ” API ì„ íƒ ê¸°ì¤€

### âœ… GraphQLì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

ë‹¤ìŒ ì¡°ê±´ **ì¤‘ í•˜ë‚˜ë¼ë„ í•´ë‹¹ë˜ë©´** GraphQLì„ ìš°ì„  ê³ ë ¤:

| ì¡°ê±´ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **ìƒì„±/ìˆ˜ì •/ì‚­ì œ** | Mutation ì‘ì—… | íšŒì›ê°€ì…, í”„ë¡œí•„ ìˆ˜ì •, êµ¬ì¸ê³µê³  ë“±ë¡ |
| **ì—¬ëŸ¬ ë¦¬ì†ŒìŠ¤ ì¡°í•©** | í•œ í™”ë©´ì—ì„œ ì—¬ëŸ¬ ì—”í‹°í‹° í•„ìš” | ì‚¬ìš©ì + ì‘ì„±í•œ êµ¬ì¸ê³µê³  ëª©ë¡ |
| **í•„ë“œ ì„ íƒ ììœ ë„** | í´ë¼ì´ì–¸íŠ¸ë³„ í•„ìš”í•œ í•„ë“œê°€ ë‹¤ë¦„ | ëª¨ë°”ì¼ì€ ìµœì†Œ ì •ë³´, ì›¹ì€ ì „ì²´ ì •ë³´ |
| **ê´€ê³„í˜• ë°ì´í„°** | N+1 ë¬¸ì œ í•´ê²° í•„ìš” | Userì˜ Jobs, Jobsì˜ Pets |
| **ì¸ì¦/ê¶Œí•œ í¬í•¨** | Guard/Decoratorë¡œ ë³´í˜¸ | ë³¸ì¸ë§Œ ìˆ˜ì • ê°€ëŠ¥í•œ API |

**ğŸ“¦ í˜„ì¬ í”„ë¡œì íŠ¸ GraphQL êµ¬í˜„:**
- User: `register`, `login`, `me`, `updateUser`, `deleteUser`
- Jobs: `createJob`, `job`, `jobs` (ëª©ë¡ + í•„í„°ë§ + í˜ì´ì§€ë„¤ì´ì…˜), `updateJob`, `deleteJob`

---

### âœ… RESTë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

ë‹¤ìŒ ì¡°ê±´ **ì¤‘ í•˜ë‚˜ë¼ë„ í•´ë‹¹ë˜ë©´** RESTë¥¼ ìš°ì„  ì‚¬ìš©:

| ì¡°ê±´ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **ë¦¬ìŠ¤íŠ¸/ê²€ìƒ‰ ì¤‘ì‹¬** | ì—¬ëŸ¬ ë¦¬ì†ŒìŠ¤ë¥¼ í•„í„°ë§í•˜ì—¬ ì¡°íšŒ | êµ¬ì¸ê³µê³  ëª©ë¡ |
| **í•„í„° ì¡°ê±´ ë‹¤ìˆ˜** | 10ê°œ ì´ìƒì˜ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° | `start_time_after`, `pets[species]`, ... |
| **í˜ì´ì§€ë„¤ì´ì…˜** | Cursor ë˜ëŠ” Offset ê¸°ë°˜ | `limit=20&cursor=xyz` |
| **ìºì‹œ/CDN í•„ìš”** | HTTP ìºì‹± í™œìš© | ê³µê°œ API, ì •ì  ë°ì´í„° |
| **ì™¸ë¶€ ê³µê°œ ê°€ëŠ¥ì„±** | ì„œë“œíŒŒí‹° ì—°ë™ | íŒŒíŠ¸ë„ˆì‚¬ API ì œê³µ |

**ğŸ“¦ í˜„ì¬ í”„ë¡œì íŠ¸ REST êµ¬í˜„:**
- `GET /jobs` (ëª©ë¡ ì¡°íšŒ - ë³µì¡í•œ í•„í„°ë§)

---

## ğŸš« ê¸ˆì§€ íŒ¨í„´

### âŒ ê¸ˆì§€ 1. ë™ì¼ ê¸°ëŠ¥ì„ RESTì™€ GraphQLë¡œ ì¤‘ë³µ ì œê³µ

**ë‚˜ìœ ì˜ˆ:**
```typescript
// âŒ REST
GET /users/:id

// âŒ GraphQL
query { user(id: "xxx") }
```

**ì˜¬ë°”ë¥¸ ì˜ˆ:**
```typescript
// âœ… í•˜ë‚˜ë§Œ ì„ íƒ (ì´ í”„ë¡œì íŠ¸ëŠ” GraphQL ì„ íƒ)
query { user(id: "xxx") }
```

**ì˜ˆì™¸:** ë§ˆì´ê·¸ë ˆì´ì…˜ ê¸°ê°„ ì¤‘ í•œì‹œì ìœ¼ë¡œ ë³‘í–‰ ìš´ì˜ ê°€ëŠ¥ (Deprecated ëª…ì‹œ)

---

### âŒ ê¸ˆì§€ 2. GraphQLë¡œ ë³µì¡í•œ ê²€ìƒ‰ API êµ¬í˜„

**ë‚˜ìœ ì˜ˆ:**
```graphql
query Jobs($filter: JobSearchFilter!) {
  jobs(filter: $filter) {
    items { id }
    nextCursor
  }
}

input JobSearchFilter {
  startTimeAfter: DateTime
  startTimeBefore: DateTime
  endTimeAfter: DateTime
  endTimeBefore: DateTime
  activity: String
  pets: PetFilter
  sort: SortInput
  pagination: PaginationInput
}
```

**ë¬¸ì œ:**
- ì¤‘ì²©ëœ Input íƒ€ì…ìœ¼ë¡œ ë³µì¡ë„ ì¦ê°€
- URLë¡œ ê³µìœ  ë¶ˆê°€
- HTTP ìºì‹± ë¶ˆê°€

**ì˜¬ë°”ë¥¸ ì˜ˆ:**
```bash
# âœ… RESTë¡œ êµ¬í˜„
GET /jobs?start_time_after=2026-01-01&activity=ì‚°ì±…&pets[species]=Dog&limit=20
```

---

### âŒ ê¸ˆì§€ 3. Resolver/Controllerì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‘ì„±

**ë‚˜ìœ ì˜ˆ:**
```typescript
// âŒ Resolverì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
@Mutation(() => User)
async register(@Args('data') data: RegisterInput) {
  const existsUser = await this.prisma.user.findUnique(...);
  if (existsUser) throw new ConflictException();
  return this.prisma.user.create(...);
}
```

**ì˜¬ë°”ë¥¸ ì˜ˆ:**
```typescript
// âœ… Serviceë¡œ ìœ„ì„
@Mutation(() => User)
async register(@Args('data') data: RegisterInput) {
  return this.usersService.create(data);
}
```

---

## ğŸ¤” êµ¬ì¸ê³µê³  ëª©ë¡ì„ RESTë¡œ êµ¬í˜„í•œ ì´ìœ 

### ë¬¸ì œ ìƒí™©

êµ¬ì¸ê³µê³  ëª©ë¡ ì¡°íšŒëŠ” **10ê°€ì§€ ì´ìƒì˜ ë³µì¡í•œ í•„í„° ì¡°í•©**ì´ í•„ìš”í•©ë‹ˆë‹¤:

| í•„í„° | ì„¤ëª… |
|------|------|
| `start_time_after` | ì‹œì‘ ì‹œê°„ ì´í›„ |
| `start_time_before` | ì‹œì‘ ì‹œê°„ ì´ì „ |
| `end_time_after` | ì¢…ë£Œ ì‹œê°„ ì´í›„ |
| `end_time_before` | ì¢…ë£Œ ì‹œê°„ ì´ì „ |
| `activity` | Full-text search |
| `pets[species]` | Dog, Cat (ì‰¼í‘œ êµ¬ë¶„) |
| `pets[age_above]` | ë°˜ë ¤ë™ë¬¼ ìµœì†Œ ë‚˜ì´ |
| `pets[age_below]` | ë°˜ë ¤ë™ë¬¼ ìµœëŒ€ ë‚˜ì´ |
| `sort` | ì •ë ¬ (start_time, end_time) |
| `limit` | í˜ì´ì§€ í¬ê¸° (ìµœëŒ€ 100) |
| `cursor` | Cursor ê¸°ë°˜ í˜ì´ì§€ë„¤ì´ì…˜ |

---

### REST vs GraphQL ë¹„êµ

#### REST (í˜„ì¬ êµ¬í˜„) âœ…

```bash
GET /jobs?start_time_after=2026-01-01T00:00:00Z
         &end_time_before=2026-12-31T23:59:59Z
         &activity=ì‚°ì±…
         &pets[species]=Dog,Cat
         &pets[age_above]=1
         &pets[age_below]=5
         &sort=start_time:desc
         &limit=20
         &cursor=previous-cursor-id
```

**ì¥ì :**
- âœ… URLë¡œ ê³µìœ  ê°€ëŠ¥ (ë¶ë§ˆí¬, ê³µìœ )
- âœ… HTTP ìºì‹± ê°€ëŠ¥ (CDN, Browser Cache)
- âœ… ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì§ê´€ì 
- âœ… Swagger UIì—ì„œ í…ŒìŠ¤íŠ¸ ìš©ì´

---

#### GraphQL (êµ¬í˜„í•˜ì§€ ì•ŠìŒ) âŒ

```graphql
query GetJobs {
  jobs(filter: {
    startTimeAfter: "2026-01-01T00:00:00Z"
    endTimeBefore: "2026-12-31T23:59:59Z"
    activity: "ì‚°ì±…"
    pets: {
      species: ["Dog", "Cat"]
      ageAbove: 1
      ageBelow: 5
    }
    sort: { field: START_TIME, direction: DESC }
    pagination: { limit: 20, cursor: "previous-cursor-id" }
  }) {
    items {
      id
      activity
      start_time
      pets { name species }
    }
    nextCursor
    hasMore
  }
}
```

**ë¬¸ì œì :**
- âŒ ì¤‘ì²©ëœ Input êµ¬ì¡°ë¡œ ë³µì¡ë„ ì¦ê°€
- âŒ URL ê³µìœ  ë¶ˆê°€
- âŒ HTTP ìºì‹± ë¶ˆê°€
- âŒ í•„í„° ì¡°í•©ì´ ë§ì„ìˆ˜ë¡ ì¥í™©í•¨

---

### ê²°ë¡ 

> **"ë³µì¡í•œ í•„í„°ë§ + í˜ì´ì§€ë„¤ì´ì…˜"ì€ RESTì˜ ê°•ì **

GraphQLì€ **ê´€ê³„í˜• ë°ì´í„° ë¡œë”©**ê³¼ **í•„ë“œ ì„ íƒì˜ ììœ ë„**ì—ì„œ ê°•ë ¥í•˜ì§€ë§Œ,
**ê²€ìƒ‰/í•„í„°ë§**ì€ RESTì˜ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ì´ ë” ê°„ê²°í•˜ê³  íš¨ìœ¨ì ì…ë‹ˆë‹¤.

**ğŸ“ ì½”ë“œì—ì„œë„ ëª…ì‹œ:**
```typescript
// src/jobs/jobs.resolver.ts (line 50-51)
// êµ¬ì¸ê³µê³  ëª©ë¡ ì¡°íšŒëŠ” ë³µì¡í•œ í•„í„°ë§ì´ í•„ìš”í•˜ë¯€ë¡œ REST API ì‚¬ìš© ê¶Œì¥
// í•„ìš”ì‹œ ë‚˜ì¤‘ì— ì¶”ê°€ ê°€ëŠ¥
```

---

## ğŸ“˜ Jobs API ì‚¬ìš© ì˜ˆì‹œ

### ì—”ë“œí¬ì¸íŠ¸

```
GET /jobs
```

**ê¸°ë³¸ ë™ì‘:**
- ê¸°ë³¸ ì •ë ¬: `start_time asc`
- ê¸°ë³¸ limit: `20`
- ìµœëŒ€ limit: `100`

---

### 1. ê¸°ë³¸ ì¡°íšŒ (ëª¨ë“  êµ¬ì¸ê³µê³ )

```bash
GET /jobs
```

**ì‘ë‹µ:**
```json
{
  "items": [
    {
      "id": "job-uuid-1",
      "creator_user_id": "user-uuid",
      "start_time": "2026-02-10T09:00:00Z",
      "end_time": "2026-02-10T18:00:00Z",
      "activity": "ì‚°ì±… ë„ìš°ë¯¸",
      "pets": [...]
    }
  ],
  "nextCursor": "job-uuid-20"
}
```

---

### 2. ë‚ ì§œ ë²”ìœ„ë¡œ í•„í„°ë§

```bash
GET /jobs?start_time_after=2026-01-01T00:00:00Z&end_time_before=2026-12-31T23:59:59Z
```

**í•„í„°:**
- `start_time_after`: 2026ë…„ 1ì›” 1ì¼ ì´í›„ ì‹œì‘
- `end_time_before`: 2026ë…„ 12ì›” 31ì¼ ì´ì „ ì¢…ë£Œ

---

### 3. Activity ê²€ìƒ‰ (Full-Text Search)

```bash
GET /jobs?activity=ì‚°ì±…
```

**ë™ì‘:**
- activity í•„ë“œì— "ì‚°ì±…"ì´ í¬í•¨ëœ êµ¬ì¸ê³µê³  ê²€ìƒ‰
- ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ìŒ (Prisma `contains` ì‚¬ìš©)

---

### 4. Pet ë‚˜ì´ í•„í„°ë§

```bash
GET /jobs?pets[age_below]=5
```

**í•„í„°:** 5ì„¸ ì´í•˜ì˜ ë°˜ë ¤ë™ë¬¼ì„ ê°€ì§„ êµ¬ì¸ê³µê³ 

```bash
GET /jobs?pets[age_above]=3&pets[age_below]=7
```

**í•„í„°:** 3ì„¸ ì´ìƒ 7ì„¸ ì´í•˜ì˜ ë°˜ë ¤ë™ë¬¼ì„ ê°€ì§„ êµ¬ì¸ê³µê³ 

---

### 5. Pet ì¢…ë¥˜ í•„í„°ë§

```bash
GET /jobs?pets[species]=Dog
```

**í•„í„°:** ê°•ì•„ì§€ë§Œ ìˆëŠ” êµ¬ì¸ê³µê³ 

```bash
GET /jobs?pets[species]=Cat,Dog
```

**í•„í„°:** ê³ ì–‘ì´ ë˜ëŠ” ê°•ì•„ì§€ê°€ ìˆëŠ” êµ¬ì¸ê³µê³  (ì‰¼í‘œë¡œ êµ¬ë¶„)

---

### 6. ì •ë ¬ ì˜µì…˜

```bash
GET /jobs?sort=start_time:desc
```

**ì •ë ¬:** ì‹œì‘ ì‹œê°„ ë‚´ë¦¼ì°¨ìˆœ

```bash
GET /jobs?sort=end_time:asc
```

**ì •ë ¬:** ì¢…ë£Œ ì‹œê°„ ì˜¤ë¦„ì°¨ìˆœ

---

### 7. Limit ì¡°ì •

```bash
GET /jobs?limit=10
```

**í˜ì´ì§€ í¬ê¸°:** 10ê°œ

```bash
GET /jobs?limit=50
```

**í˜ì´ì§€ í¬ê¸°:** 50ê°œ (ìµœëŒ€ 100)

---

### 8. Cursor ê¸°ë°˜ Pagination

```bash
# ì²« í˜ì´ì§€
GET /jobs?limit=10

# ì‘ë‹µ
{
  "items": [...],
  "nextCursor": "job-id-123"
}

# ë‹¤ìŒ í˜ì´ì§€
GET /jobs?limit=10&cursor=job-id-123
```

---

### 9. ë³µí•© í•„í„° (ì—¬ëŸ¬ ì¡°ê±´ ì¡°í•©)

```bash
GET /jobs?start_time_after=2026-02-01T00:00:00Z&activity=ì‚°ì±…&pets[species]=Dog&pets[age_below]=5&sort=start_time:desc&limit=15
```

**í•„í„° ì¡°í•©:**
- ì‹œì‘ ì‹œê°„: 2026ë…„ 2ì›” 1ì¼ ì´í›„
- Activity: "ì‚°ì±…" í¬í•¨
- Pet: ê°•ì•„ì§€ ì¤‘ 5ì„¸ ì´í•˜
- ì •ë ¬: ì‹œì‘ ì‹œê°„ ë‚´ë¦¼ì°¨ìˆœ
- Limit: 15ê°œ

---

### 10. ê³ ê¸‰ ê²€ìƒ‰ (ëª¨ë“  í•„í„° ì¡°í•©)

```bash
GET /jobs?start_time_after=2026-01-15T09:00:00Z&start_time_before=2026-03-31T18:00:00Z&end_time_after=2026-01-15T10:00:00Z&activity=ëŒë´„&pets[species]=Cat,Dog&pets[age_above]=1&pets[age_below]=10&sort=end_time:asc&limit=25&cursor=previous-cursor-id
```

**í•„í„° ì¡°í•©:**
- ì‹œì‘ ì‹œê°„: 2026-01-15 09:00 ì´í›„ ~ 2026-03-31 18:00 ì´ì „
- ì¢…ë£Œ ì‹œê°„: 2026-01-15 10:00 ì´í›„
- Activity: "ëŒë´„" í¬í•¨
- Pet: ê³ ì–‘ì´ ë˜ëŠ” ê°•ì•„ì§€, 1ì„¸ ì´ìƒ 10ì„¸ ì´í•˜
- ì •ë ¬: ì¢…ë£Œ ì‹œê°„ ì˜¤ë¦„ì°¨ìˆœ
- Limit: 25ê°œ
- Cursor: ì´ì „ í˜ì´ì§€ì—ì„œ ë°›ì€ cursor ì‚¬ìš©

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### Swagger UI

1. **http://localhost:8000/api** ì ‘ì†
2. `GET /jobs` ì—”ë“œí¬ì¸íŠ¸ í´ë¦­
3. "Try it out" ë²„íŠ¼ í´ë¦­
4. Parameters ì„¹ì…˜ì—ì„œ ì›í•˜ëŠ” í•„í„° ì…ë ¥
5. "Execute" ë²„íŠ¼ í´ë¦­

---

### ë¡œê·¸ í™•ì¸

ì„œë²„ ì½˜ì†”ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
ğŸ” [JobsService.findAll] ìš”ì²­ëœ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°: {...}
ğŸ“… [í•„í„°] start_time >= 2026-01-01T00:00:00Z
ğŸ” [í•„í„°] activity contains: ì‚°ì±…
ğŸ¾ [í•„í„°] pet species in: ["Cat", "Dog"]
ğŸ“Š [ì •ë ¬] start_time desc
ğŸ“„ [í˜ì´ì§•] limit: 20 take: 21
ğŸ”§ [Prisma Query] where ì¡°ê±´: {...}
â±ï¸ [ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„] 45 ms
ğŸ“¦ [ì¡°íšŒ ê²°ê³¼] ì´ 15ê°œ ì¡°íšŒë¨
âœ… [ìµœì¢… ê²°ê³¼]
  - ë°˜í™˜í•  items: 15ê°œ
  - ë‹¤ìŒ í˜ì´ì§€ ì¡´ì¬: false
  - nextCursor: null
```

---

## ğŸ“Š ê¸°ëŠ¥ë³„ API ì„ íƒ ë§¤íŠ¸ë¦­ìŠ¤

| ê¸°ëŠ¥ | API ë°©ì‹ | ì´ìœ  |
|------|---------|------|
| íšŒì›ê°€ì… | GraphQL | ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ ìƒì„±, íƒ€ì… ì•ˆì •ì„± |
| ë¡œê·¸ì¸ | GraphQL | ë‹¨ì¼ ì‘ì—…, JWT ë°˜í™˜ |
| ì‚¬ìš©ì ìƒì„¸ ì¡°íšŒ | GraphQL | ê´€ê³„í˜• ë°ì´í„° ë¡œë”© ê°€ëŠ¥ (jobs í¬í•¨) |
| ì‚¬ìš©ì ìˆ˜ì • | GraphQL | ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ ìˆ˜ì • (Mutation) |
| ì‚¬ìš©ì ì‚­ì œ | GraphQL | ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ ì‚­ì œ (Mutation) |
| êµ¬ì¸ê³µê³  ë“±ë¡ | GraphQL | ì¤‘ì²©ëœ pets ë°ì´í„°, íƒ€ì… ê²€ì¦ |
| êµ¬ì¸ê³µê³  ìƒì„¸ ì¡°íšŒ | GraphQL | ìœ ì—°í•œ í•„ë“œ ì„ íƒ (IDë¡œ ì§ì ‘ ì¡°íšŒ) |
| **êµ¬ì¸ê³µê³  ëª©ë¡** | **REST + GraphQL** | **í•™ìŠµ ëª©ì ìœ¼ë¡œ ì–‘ìª½ êµ¬í˜„** |
| êµ¬ì¸ê³µê³  ìˆ˜ì • | GraphQL | ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ ìˆ˜ì • (Mutation) |
| êµ¬ì¸ê³µê³  ì‚­ì œ | GraphQL | ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ ì‚­ì œ (Mutation) |

**ğŸ“Œ êµ¬ì¸ê³µê³  ëª©ë¡:**
- **REST**: í”„ë¡œë•ì…˜ ê¶Œì¥ (URL ê³µìœ , HTTP ìºì‹±)
- **GraphQL**: í•™ìŠµ ëª©ì  êµ¬í˜„ (Pagination, Input Type í•™ìŠµ)

---

## ğŸ“š ë””ë ‰í† ë¦¬ êµ¬ì¡° (ì°¸ê³ )

```
src/
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ users.controller.ts      # REST API (í˜„ì¬ ë³‘í–‰ ìš´ì˜)
â”‚   â”œâ”€â”€ users.resolver.ts        # GraphQL API (ì£¼ìš”)
â”‚   â”œâ”€â”€ users.service.ts         # ê³µìš© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ â­
â”‚   â”œâ”€â”€ dto/                     # REST DTO
â”‚   â”‚   â”œâ”€â”€ create-user.dto.ts
â”‚   â”‚   â””â”€â”€ update-user.dto.ts
â”‚   â”œâ”€â”€ inputs/                  # GraphQL Input
â”‚   â”‚   â”œâ”€â”€ register.input.ts
â”‚   â”‚   â””â”€â”€ update-user.input.ts
â”‚   â””â”€â”€ models/                  # GraphQL ObjectType
â”‚       â”œâ”€â”€ user.model.ts
â”‚       â””â”€â”€ auth-payload.model.ts
â”‚
â””â”€â”€ jobs/
    â”œâ”€â”€ jobs.controller.ts       # REST API (ëª©ë¡ ì¡°íšŒ ì „ìš©)
    â”œâ”€â”€ jobs.resolver.ts         # GraphQL API (CRUD)
    â”œâ”€â”€ jobs.service.ts          # ê³µìš© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ â­
    â”œâ”€â”€ dto/                     # REST DTO
    â”‚   â”œâ”€â”€ create-job.dto.ts
    â”‚   â”œâ”€â”€ update-job.dto.ts
    â”‚   â””â”€â”€ find-all-jobs.dto.ts
    â”œâ”€â”€ inputs/                  # GraphQL Input
    â”‚   â”œâ”€â”€ create-job.input.ts
    â”‚   â””â”€â”€ update-job.input.ts
    â””â”€â”€ models/                  # GraphQL ObjectType
        â”œâ”€â”€ job.model.ts
        â””â”€â”€ pet.model.ts
```

**í•µì‹¬:**
- **Service ê³„ì¸µì€ ë‹¨ì¼ íŒŒì¼**ë¡œ RESTì™€ GraphQLì´ ê³µìœ 
- DTOì™€ InputTypeì€ ë¶„ë¦¬í•˜ë˜, Service ë©”ì„œë“œëŠ” ë‘˜ ë‹¤ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì„¤ê³„

---

## ğŸ“ Best Practices

### 1. Service ë©”ì„œë“œëŠ” í”„ë¡œí† ì½œ ë…ë¦½ì ìœ¼ë¡œ

```typescript
// âœ… ì¢‹ì€ ì˜ˆ
@Injectable()
export class UsersService {
  // RegisterInput | CreateUserDto ëª¨ë‘ ë°›ì„ ìˆ˜ ìˆìŒ
  async create(input: RegisterInput | CreateUserDto): Promise<User> {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  }
}
```

### 2. ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ íŒë‹¨ ê¸°ì¤€

**ì§ˆë¬¸ 1:** ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ”ê°€? (Create/Update/Delete)
- **Yes** â†’ GraphQL Mutation

**ì§ˆë¬¸ 2:** ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ë¥¼ IDë¡œ ì¡°íšŒí•˜ëŠ”ê°€?
- **Yes** â†’ GraphQL Query

**ì§ˆë¬¸ 3:** ë³µì¡í•œ í•„í„°ë§ì´ í•„ìš”í•œê°€? (3ê°œ ì´ìƒ)
- **Yes** â†’ REST API

**ì§ˆë¬¸ 4:** í˜ì´ì§€ë„¤ì´ì…˜ì´ í•„ìš”í•œê°€?
- **Yes** â†’ REST API

### 3. ë¬¸ì„œí™” í•„ìˆ˜

- API ì„ íƒ ì‹œ ì´ ë¬¸ì„œì˜ ê¸°ì¤€ì„ ë”°ëëŠ”ì§€ í™•ì¸
- ì˜ˆì™¸ ì‚¬í•­ì€ ì½”ë“œ ì£¼ì„ìœ¼ë¡œ ëª…ì‹œ
- ìƒˆë¡œìš´ íŒ¨í„´ ë°œê²¬ ì‹œ ì´ ë¬¸ì„œ ì—…ë°ì´íŠ¸

---

**ë¬¸ì„œ ë²„ì „**: 2.0
**ìµœì¢… ìˆ˜ì •ì¼**: 2026-02-09
**ì‘ì„±ì**: Claude Code
